webpackJsonp([1],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{msg:"使用说明"}}}},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{msg:"日志记录"}}}},102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{msg:"用户中心"}}}},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(48),i=n.n(r),a=n(49),o=n.n(a),s=n(25),u=n(17),l=n(172),c=n.n(l);t.default={data:function(){return{is_loading:!1,proxies:[]}},components:{UserChoise:c.a},computed:o()({user_id:function(){return this.$route.query.user_id||this.profile.user_id}},n.i(s.a)(["config","profile"])),created:function(){this.fetchProxies()},methods:{fetchProxies:function(){var e=this;this.is_loading=!0;var t=this.user_id;n.i(u.a)("/api/proxies",{query:{user_id:t}}).then(function(t){e.is_loading=!1;var n=!0,r=!1,a=void 0;try{for(var o,s=i()(t.data);!(n=(o=s.next()).done);n=!0){var u=o.value;u.target_url=u.target_type.toLowerCase()+"://"+u.target,"HTTP_ONLY"===u.proxy_type?(u.proxy_type_name="HTTP 访问",u.proxy_url="http://"+u.domain,80!==Number(e.config.http_port)&&(u.proxy_url+=":"+e.config.http_port)):("HTTPS_ONLY"===u.proxy_type?u.proxy_type_name="HTTPS 访问":u.proxy_type_name="HTTP 或 HTTPS",u.proxy_url="https://"+u.domain,Number(443!==e.config.https_port)&&(u.proxy_url+=":"+e.config.https_port))}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}e.proxies=t.data}).catch(function(){e.is_loading=!1})},userChoise:function(e){this.$router.push({query:{user_id:e}})}},watch:{$route:function(){this.fetchProxies()}}}},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{msg:"统计分析"}}}},105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{msg:"用户管理"}}}},161:function(e,t){},162:function(e,t){},163:function(e,t){},164:function(e,t){},17:function(e,t,n){"use strict";var r=n(110),i=n.n(r),a=n(106),o=n.n(a),s=n(190),u=(n.n(s),n(169)),l=n.n(u),c=n(67),f=n.n(c),d=function(e){var t=f.a.assign({state:location.href,usertype:"admin"},e);return"https://qy.weixin.qq.com/cgi-bin/loginpage"+l.a.format({query:t})},p=function(e,t){switch(e){case 401:return location.href=d(t.extra),!0;default:return alert(t.message),!1}};t.a=function(e,t){t=t||{},t.method=t.method||"GET",t.credentials="same-origin",["POST","PUT"].indexOf(t.method.toUpperCase())!==-1&&(t.headers=t.headers||{},t.headers["Content-Type"]="application/json",t.body&&"string"!=typeof body&&(t.body=o()(t.body))),e+=l.a.format({query:t.query}),t.query=void 0;var n=void 0,r=void 0;return fetch(e,t).then(function(e){return n=e.status,e.json()}).then(function(e){if(r=e,n>=400)throw new Error(r.message);return{status:n,data:r}}).catch(function(e){throw"object"!==(void 0===r?"undefined":i()(r))&&(r={message:e.message}),p(n,r),e})}},171:function(e,t,n){n(164);var r=n(3)(n(98),n(186),"data-v-db330e68",null);e.exports=r.exports},172:function(e,t,n){var r=n(3)(n(99),n(185),null,null);e.exports=r.exports},173:function(e,t,n){var r=n(3)(n(100),n(187),null,null);e.exports=r.exports},174:function(e,t,n){var r=n(3)(n(101),n(180),null,null);e.exports=r.exports},175:function(e,t,n){var r=n(3)(n(102),n(181),null,null);e.exports=r.exports},176:function(e,t,n){n(163);var r=n(3)(n(103),n(184),"data-v-cbae7e1e",null);e.exports=r.exports},177:function(e,t,n){var r=n(3)(n(104),n(182),null,null);e.exports=r.exports},178:function(e,t,n){var r=n(3)(n(105),n(179),null,null);e.exports=r.exports},179:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(e._s(e.msg))])},staticRenderFns:[]}},180:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(e._s(e.msg))])},staticRenderFns:[]}},181:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(e._s(e.msg))])},staticRenderFns:[]}},182:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(e._s(e.msg))])},staticRenderFns:[]}},183:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Navbar"),e._v(" "),n("div",{staticClass:"container"},[n("router-view")],1)],1)},staticRenderFns:[]}},184:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"topbar"},[n("user-choise",{attrs:{value:e.user_id,disabled:!e.profile.is_admin},on:{"user-choise":e.userChoise}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"plus"}})],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.is_loading,expression:"is_loading"}],attrs:{data:e.proxies,stripe:"",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"mark",label:"名称",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"proxy_type_name",label:"回源方式",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"domain",label:"回源域名",sortable:""},scopedSlots:e._u([["default",function(t){return[n("a",{attrs:{href:t.row.proxy_url}},[e._v(e._s(t.row.domain))])]}]])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"回源地址",sortable:""},scopedSlots:e._u([["default",function(t){return[n("a",{attrs:{href:t.row.target_url}},[e._v(e._s(t.row.target))])]}]])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([["default",function(t){return[n("el-button",{attrs:{size:"small"}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"}},[e._v("删除")])]}]])})],1)],1)},staticRenderFns:[]}},185:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-autocomplete",{attrs:{"fetch-suggestions":e.featchUser,disabled:e.disabled,placeholder:"请输入用户名",icon:"fa-user"},on:{select:e.handleSelect},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})},staticRenderFns:[]}},186:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"navbar"},[n("div",{staticClass:"container"},[n("el-menu",{attrs:{theme:"dark",mode:"horizontal","default-active":e.activeIndex},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"proxies"}},[e._v("代理列表")]),e._v(" "),n("el-menu-item",{attrs:{index:"users"}},[e._v("用户管理")]),e._v(" "),n("el-menu-item",{attrs:{index:"stats"}},[e._v("统计分析")]),e._v(" "),n("el-menu-item",{attrs:{index:"logs"}},[e._v("日志记录")]),e._v(" "),n("el-submenu",{staticClass:"right",attrs:{index:"me"}},[n("template",{slot:"title"},[e.profile.avatar?n("i",{staticClass:"el-icon-fa-user el-icon-fa-2x"}):n("img",{staticClass:"avatar",attrs:{src:e.profile.avatar}})]),e._v(" "),n("el-menu-item",{attrs:{index:"profile"}},[e._v("个人中心")]),e._v(" "),n("el-menu-item",{attrs:{index:"logout"}},[e._v("注销登录")])],2),e._v(" "),n("el-menu-item",{staticClass:"right",attrs:{index:"github"}},[n("i",{staticClass:"el-icon-fa-github el-icon-fa-2x",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("el-menu-item",{staticClass:"right",attrs:{index:"help"}},[n("i",{staticClass:"el-icon-fa-book el-icon-fa-2x",attrs:{"aria-hidden":"true"}})])],1)],1)])},staticRenderFns:[]}},187:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(e._s(e.msg))])},staticRenderFns:[]}},70:function(e,t,n){"use strict";var r=n(2),i=n(188),a=n(176),o=n.n(a),s=n(178),u=n.n(s),l=n(177),c=n.n(l),f=n(174),d=n.n(f),p=n(173),m=n.n(p),h=n(175),_=n.n(h);r.default.use(i.a),t.a=new i.a({mode:"history",routes:[{path:"/",redirect:{name:"proxies"}},{path:"/proxies",name:"proxies",component:o.a,meta:{title:"代理列表"}},{path:"/users",name:"users",component:u.a,meta:{title:"用户管理"}},{path:"/stats",name:"stats",component:c.a,meta:{title:"统计分析"}},{path:"/logs",name:"logs",component:d.a,meta:{title:"日志分析"}},{path:"/profile",name:"profile",component:_.a,meta:{title:"个人中心"}},{path:"/help",name:"help",component:m.a,meta:{title:"使用说明"}}]})},71:function(e,t,n){"use strict";var r=n(2),i=n(25);r.default.use(i.b),t.a=new i.b.Store({state:{profile:{},config:{}},getters:{getProfile:function(e){return e.profile},getConfig:function(e){return e.config}},mutations:{setProfile:function(e,t){e.profile=t},setConfig:function(e,t){e.config=t}},actions:{setProfile:function(e,t){(0,e.commit)("setProfile",t)},setConfig:function(e,t){(0,e.commit)("setConfig",t)}}})},73:function(e,t,n){n(162);var r=n(3)(n(97),n(183),null,null);e.exports=r.exports},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=n(72),a=n.n(i),o=n(73),s=n.n(o),u=n(70),l=n(71);r.default.config.productionTip=!1,r.default.use(a.a);u.a.beforeEach(function(e,t,n){document.title=e.meta.title+" - 简易反向代理",n()}),new r.default({el:"#app",store:l.a,router:u.a,template:"<App/>",components:{App:s.a}})},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(161),i=(n.n(r),n(67)),a=(n.n(i),n(25)),o=n(17),s=n(171),u=n.n(s);t.default={components:{Navbar:u.a},computed:n.i(a.a)(["profile","config"]),created:function(){this.fetchProfile(),this.fetchConfig()},methods:{fetchProfile:function(){var e=this;if(!n.i(i.isEmpty)(this.profile))return!0;n.i(o.a)("/api/profile").then(function(t){e.$store.dispatch("setProfile",t.data)})},fetchConfig:function(){var e=this;if(!n.i(i.isEmpty)(this.config))return!0;n.i(o.a)("/api/config").then(function(t){e.$store.dispatch("setConfig",t.data)})}}}},98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49),i=n.n(r),a=n(25),o=n(17);t.default={computed:i()({activeIndex:function(){return this.$route.name}},n.i(a.a)(["profile","config"])),methods:{handleSelect:function(e){"github"===e?this.config.github&&(window.location.href=this.config.github):"logout"===e?n.i(o.a)("/api/wechat/logout",{method:"POST"}):this.$router.push({name:e})}}}},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(48),i=n.n(r),a=n(17);t.default={props:["value","disabled"],data:function(){return{input:this.value}},watch:{value:function(e){this.input=e}},methods:{featchUser:function(e,t){n.i(a.a)("/api/users",{query:{key:e}}).then(function(e){var n=!0,r=!1,a=void 0;try{for(var o,s=i()(e.data);!(n=(o=s.next()).done);n=!0){var u=o.value;u.value=u.name+"("+u.user_id+")"}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}t(e.data.slice(0,5))})},handleSelect:function(e){this.input=e.user_id,this.$emit("user-choise",e.user_id)}}}}},[96]);
//# sourceMappingURL=app.dab2a26584c064df67ae.js.map